## Содержание ##
1. [Part 1. Установка ОС](#part-1-установка-ос)
2. [Part 2. Создание пользователя](#part-2-создание-пользователя)
3. [Part 3. Настройка сети ОС](#part-3-настройка-сети-ос)
4. [Part 4. Обновление ОС](#part-4-обновление-ос)
5. [Part 5. Использование команды sudo](#part-5-использование-команды-sudo)
6. [Part 6. Установка и настройка службы времени](#part-6-установка-и-настройка-службы-времени)
7. [Part 7. Установка и использование текстовых редакторов](#part-7-установка-и-использование-текстовых-редакторов)
8. [Part 8. Установка и базовая настройка сервиса SSHD](#part-8-установка-и-базовая-настройка-сервиса-sshd)
9. [Part 9. Установка и использование утилит top, htop](#part-9-установка-и-использование-утилит-top-htop)
10. [Part 10. Использование утилиты fdisk](#part-10-использование-утилиты-fdisk)
11. [Part 11. Использование утилиты df](#part-11-использование-утилиты-df)
12. [Part 12. Использование утилиты du](#part-12-использование-утилиты-du)
13. [Part 13. Установка и использование утилиты ncdu](#part-13-установка-и-использование-утилиты-ncdu)
14. [Part 14. Работа с системными журналами](#part-14-работа-с-системными-журналами)
15. [Part 15. Использование планировщика заданий CRON](#part-15-использование-планировщика-заданий-cron)

<br>

## Part 1. Установка ОС ##
**Установливаем Ubuntu 20.04 Server LTS без графического интерфейса. (Используя программу для виртуализации - VirtualBox). Проверяем версию с помощью команды `cat /etc/issue`**

![img_p1](images/Part_1.png)<br>*Рис.1 проверяем версию*<br>

<br>

## Part 2. Создание пользователя ##
**1. Создаем пользователя**

![img_p2.1](images/Part_2.1.png)<br>*Рис.2 создаем пользователя, добавляем в группу adm*<br>

**2. Проверяем, что новый пользователь есть в выводе команды `cat /etc/passwd`**

![img_p2.2](images/Part_2.2.png)<br>*Рис.3 использование команды `cat /etc/passwd`*<br>

<br>

## Part 3. Настройка сети ОС ##
**1. Задаем название машины вида user-1**

![img_p3.1](images/Part_3.1.png)<br>*Рис.4 задаем название машины*<br>

**2. Устанавливаем временную зону, соответствующую моему текущему местоположению (Новосибирск).**

![img_p3.2](images/Part_3.2.png)<br>*Рис.5 устанавливаем временную зону*<br>

**3. Выведем названия сетевых интерфейсов с помощью консольной команды**

![img_p3.3](images/Part_3.3.png)<br>*Рис.6 названия сетевых интерфейсов*<br>

* Интерфейс lo (от loopback, что переводится как "обратная петля") - виртуальный сетевой интерфейс, имеющей IP-адрес 127.0.0.1. Она предназначена для обеспечения сетевого доступа к компьютеру. Также имеет dns-имя - localhost.

**4. Используя консольную команду, получаем ip адрес устройства, на котором работаем, от DHCP сервера**

![img_p3.4](images/Part_3.4.png)<br>*Рис.7 получаем ip адрес моего устройства*<br>

* DHCP (англ. Dynamic Host Configuration Protocol — протокол динамической настройки узла) — сетевой протокол, позволяющий сетевым устройствам автоматически получать IP-адрес и другие параметры, необходимые для работы в сети TCP/IP. Данный протокол работает по модели «клиент-сервер».

**5. Определили и вывели на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw)**

![img_p3.5](images/Part_3.5.png)<br>*Рис.8 внешний ip адрес*<br>
![img_p3.6](images/Part_3.6.png)<br>*Рис.9 внутренний ip адрес*<br>

**6. Задаем статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (используя публичный DNS серверы, например 1.1.1.1 или 8.8.8.8) с помощью команды `sudo vim /etc/netplan/00-installer-config.yaml`**

![img_p3.7](images/Part_3.7.png)<br>*Рис.10 задаем статичные настройки ip, gw, dns*<br>
![img_p3.8](images/Part_3.8.png)<br>*Рис.11 сохраняем изменения*<br>


**7. Перезагружаем виртуальную машину. Убеждаемся, что статичные сетевые настройки (ip, gw, dns) соответствуют заданным в предыдущем пункте**

![img_p3.9](images/Part_3.9.png)<br>*Рис.12 перезагружаем машину*<br>
![img_p3.10](images/Part_3.10.png)<br>*Рис.13 после перезапуска данные совпадают с предыдущими*<br>

**8. Пропинговали удаленные хосты 1.1.1.1 и ya.ru. В выводе команды есть фраза «0% packet loss»**

![img_p3.11](images/Part_3.11.png)<br>*Рис.14 хост 1.1.1.1*<br>
![img_p3.12](images/Part_3.12.png)<br>*Рис.15 хост ya.ru*<br>

<br>

## Part 4. Обновление ОС ##

**Обновляем системные пакеты до последней на момент выполнения задания версии**

![img_p4.1](images/Part_4.1.png)<br>*Рис.16 Обновляем системные пакеты*<br>

<br>

## Part 5. Использование команды sudo ##

**Разрешаем пользователю, созданному в Part 2,выполнять команду sudo.**

Использование команды для создания пароля user2 `sudo passwd user2`
Использование команды `sudo usermod -aG sudo user` для наделения user2 правами суперпользователя

![img_p5.1](images/Part_5.1.png)<br>*Рис.17 Разрешаем пользователю выполнять команду sudo*<br>

* sudo (Superuser Do) - это команда, которая позволяет пользователю выполнить команду от имени другого пользователя, обычно с правами администратора (root)

<br>

## Part 6. Установка и настройка службы времени ##

**Настроем службу автоматической синхронизации времени**

![img_p6.1](images/Part_6.1.png)<br>*Рис.18 Настраиваем службу автоматической синхронизации времени*<br>

<br>

## Part 7. Установка и использование текстовых редакторов ##

**1. Используя каждый из трех выбранных редакторов, создаем файл test_X.txt, где X -- название редактора, в котором создан файл. Пишем в нём свой никнейм, закрываем файл с сохранением изменений**

![img_p7.1](images/Part_7.1.png)<br>*Рис.19 Для выхода используется Esc, затем пишется :wq и название файла*<br>

![img_p7.2](images/Part_7.2.png)
![img_p7.3](images/Part_7.3.png)<br>*Рис.20 Для сохранения и выхода из файла для начала прожимаем ^O - сохранение файла, после чего подтверждаем и прожимаем для выхода ^X*<br>

![img_p7.4](images/Part_7.4.png)<br>*Рис.21 сохраняется с помощь ^KX*<br>

**2. Используя каждый из трех выбранных редакторов, открываем файл на редактирование, редактируем файл, заменив никнейм на строку «21 School 21», закрой файл без сохранения изменений**

![img_p7.5](images/Part_7.5.png)<br>*Рис.22 сохраняем без изменений с помощью :q!*<br>

![img_p7.6](images/Part_7.6.png)<br>*Рис.23 сохраняем без изменений с помощью ^X N*<br>

![img_p7.7](images/Part_7.7.png)<br>*Рис.24 сохраняем без изменений с помощью ^C Y*<br>

**3. Используя каждый из трех выбранных редакторов, редактируем файл ещё раз (по аналогии с предыдущим пунктом), а затем ищем по содержимому файла (слово) и замены слова на любое другое**

![img_p7.8](images/Part_7.8.png)<br>*Рис.25 ищем слово с помощью /'слово'*<br>
![img_p7.9](images/Part_7.9.png)<br>*Рис.26 меняем с помощью :s/изначальное слово/замененное слово'*<br>

![img_p7.10](images/Part_7.10.png)<br>*Рис.27 поиск по ^W*<br>
![img_p7.11](images/Part_7.11.png)<br>*Рис.28 заменяем слово*<br>
![img_p7.12](images/Part_7.12.png)<br>*Рис.29 сохраняем на Y*<br>

![img_p7.13](images/Part_7.13.png)<br>*Рис.30 для поиска используем ^K F > что ищем > I*<br>
![img_p7.14](images/Part_7.14.png)<br>*Рис.31 для замены используем ^K F > что собираемся заменить > R > чем заменяем > Y*<br>

<br>

## Part 8. Установка и базовая настройка сервиса SSHD ##

**1. Установим службу SSHd**

![img_p8.1](images/Part_8.1.png)<br>*Рис.32 устанавливаем службу SSHd*<br>

**2. Добавляем автостарт службы при загрузке системы**

![img_p8.2](images/Part_8.2.png)<br>*Рис.33 добавляем автостарт*<br>

**3. Перенастраиваем службу SSHd на порт 2022 с помощью команды `sudo nano /etc/ssh/sshd_config` меняем 22 на 2022**

![img_p8.3](images/Part_8.3.png)<br>*Рис.34 перенастраиваем службу SSHd на порт 2022*<br>

![img_p8.4](images/Part_8.4.png)<br>*Рис.35 добавляем автозапуск через команду `sudo systemctl enable ssh`*<br>

**4. Используем команду ps, чтобы увидеть наличие процесса sshd**

![img_p8.5](images/Part_8.5.png)<br>*Рис.36 используя команду ps, покажи наличие процесса sshd. Для этого к команде нужно подобрать ключи*<br>
* ps - сведения о процессах
* -е - все процессы

**5. `sudo reboot` - перезапускает систему**

**6. Вывод команды `netstat -tan` содержит `tcp 0 0 0.0.0.0:2022 0.0.0.0:* LISTEN`** 

![img_p8.6](images/Part_8.6.png)<br>*Рис.37 вывод команды `netstat -tan`*<br>
* -a - Отображает состояние сокетов (сокеты используемые серверными процессами обычно не отображаются)

* -n - Отображает сетевые адреса как числа, а не как символы

* -t - Отображает TCP подключения

* Proto - Тип протокола

* Recv-Q - Счетчик байтов не скопированных программой пользователя из этого сокета

* Send-Q - Счетик байтов, которые не подтверждены удаленнеым узлом

* Local Address - Адрес и номер порта локального конца сокета

* Foreign Address - Адрес и номер порта удаленного конца сокета

* State - Состояние сокета

* LISTEN - Ожидание входящих подключений

* 0.0.0.0 - немаршрутизируемый адрес IPv4, который используется в качестве адреса по умолчанию или адреса-заполнителя

<br>

## Part 9. Установка и использование утилит top, htop ##

**Установим и запустим утилиты top и htop**

**выводы команды top**
![img_p9.1](images/Part_9.1.png)<br>*Рис.38 top*<br>
* uptime - 16 минут;
* количество авторизованных пользователей - 1;
* общая загрузка системы - 0.00 0.00 0.00;
* общее количество процессов - 99;
* загрузку cpu - процент времени процессора, затраченного на выполнение пользовательских процессов (us) 0.0
процент времени процессора, затраченного на выполнение процессов ядра (sy) 0.0
процент времени процессора, затраченного на выполнение пользовательских процессов с ограничениями (ni) 0.0
процент времени процессора проведённое в режиме ожидания (id) 99.7
процент времени процессора потраченное на ожидание на периферийных устройствах (wa) 0.0
* загрузку памяти - физическая память (Mem)
общий объем ОЗУ (total) 1971.6
количество свободной памяти (free) 1471.5
количество занятой памяти (used) 138.7
зарезервированная системой память (buff/cache) 361.4
виртуальная память или пространство подкачки (Swap)
общий объем ОЗУ (total) 2048.0
количество свободной памяти (free) 2048.0
количество занятой памяти (used) 0.0
память который может быть выделена для процессов, не использую \ большую область диска (avail Mem) 1678.9
* pid процесса занимающего больше всего памяти - 673
* pid процесса, занимающего больше всего процессорного времени - 1659

**выводы команды htop**
![img_p9.2](images/Part_9.2.png)<br>*Рис.39 htop*<br>
* отсортировано по PID
![img_p9.3](images/Part_9.3.png)<br>*Рис.40 сортировка по PID*<br>
* отсортировано по PERCENT_CPU
![img_p9.4](images/Part_9.4.png)<br>*Рис.41 сортировка по PERCENT_CPU*<br>
* отсортировано по PERCENT_MEM
![img_p9.5](images/Part_9.5.png)<br>*Рис.42 сортировка по PERCENT_MEM*<br>
* отсортировано по TIME
![img_p9.6](images/Part_9.6.png)<br>*Рис.43 сортировка по TIME*<br>

**отфильтрованный процесс sshd**
![img_p9.7](images/Part_9.7.png)<br>*Рис.44 отфильтрованный процесс sshd*<br>

**процессы syslog, найденным, используя поиск с процессом syslog**
![img_p9.8](images/Part_9.8.png)<br>*Рис.45 процессы syslog*<br>

**с добавленным выводом hostname, clock и uptime**
![img_p9.9](images/Part_9.9.png)<br>*Рис.46 с добавленным выводом hostname, clock и uptime*<br>

<br>

## Part 10. Использование утилиты fdisk ##

**Запускаем команду `fdisk -l`**

![img_p10](images/Part_10.png)<br>*Рис.47 команда `fdisk -l`*<br>
* название жёсткого диска sda;
* его размер 25 GiB;
* количество секторов на диске 52428800;
* размер swap 0.0 GiB.

<br>

## Part 11. Использование утилиты df ##

**Запускаем команду df**

![img_p11](images/Part_11.png)<br>*Рис.48 команда `df`*<br>
* размер раздела 11758760 KiB
* размер занятого пространства 4788772 KiB
* размер свободного пространства 6350880 KiB
* процент использования 43%

**Запускаем команду df -Th**

![img_p11.2](images/Part_11.2.png)<br>*Рис.49 команда `df -Th`*<br>
* размер раздела 12G
* размер занятого пространства 4.6G
* размер свободного пространства 6.1G
* процент использования 43%

<br>

## Part 12. Использование утилиты du ##

**Запускаем команду du**
**Выводим размер папки /home**

![img_p12.1](images/Part_12.1.png)<br>*Рис.50 размер папки /home*<br>

**Выводим размер папки /var с помощью команды `du -h /var`**

![img_p12.2](images/Part_12.2.png)<br>*Рис.51 размер папки /var*<br>

**Выводим размер папки /var/log**

![img_p12.3](images/Part_12.3.png)<br>*Рис.52 размер папки /var/log*<br>

**Выводим размер папки /var/log (используя *)**

![img_p12.4](images/Part_12.4.png)<br>*Рис.53 размер папки /var/log (используя *)*<br>

<br>

## Part 13. Установка и использование утилиты ncdu ##

**Устанавливаем утилиту ncdu с помощью команды `sudo apt install ncdu`**
**Выводим размер папки /home с помощью `ncdu /home`**

![img_p13](images/Part_13.png)<br>*Рис.54 размер папки /home*<br>

**Выводим размер папки /var с помощью `ncdu /var`**

![img_p13.2](images/Part_13.2.png)<br>*Рис.55 размер папки /var*<br>

**Выводим размер папки /var/log с помощью `ncdu /var/log`**

![img_p13.3](images/Part_13.3.png)<br>*Рис.56 размер папки /var/log*<br>

<br>

## Part 14. Работа с системными журналами ##

**Открываем для просмотра:**

1. `/var/log/dmesg`

![img_p14](images/Part_14.png)
![img_p14.1](images/Part_14.1.png)<br>*Рис.57 открываем для просмотра: `/var/log/dmesg`*<br>

2. `/var/log/syslog`

![img_p14.2](images/Part_14.2.png)<br>*Рис.58 открываем для просмотра: `/var/log/syslog`*<br>

3. `/var/log/auth.log`

![img_p14.3](images/Part_14.3.png)<br>*Рис.59 открываем для просмотра: `/var/log/auth.log`*<br>

* Время последней успешной авторизации - 16:10:201
* Имя пользователя - user2
* Способ входа аутентификации в режиме pam_unix 

**Перезапускаем службу SSHd**

![img_p14.4](images/Part_14.4.png)<br>*Рис.60 перезапуск OpenSSH Server*<br>

**Рестарт службы**

![img_p14.5](images/Part_14.5.png)<br>*Рис.61 рестарт службы*<br>

<br>

## Part 15. Использование планировщика заданий CRON ##

**Используя планировщик заданий, запускаем команду uptime через каждые 2 минуты**

* Внесем скрипт в планировщик командой `crontab -e`

![img_p15.1](images/Part_15.1.png)

* Проверим выполнение команды uptime с интервалом 2 минуты

![img_p15.2](images/Part_15.2.png)

* Список текущих заданий для CRON

![img_p15.3](images/Part_15.3.png)

**Удаление задач и вывод списка**

![img_p15.4](images/Part_15.4.png)

<br>